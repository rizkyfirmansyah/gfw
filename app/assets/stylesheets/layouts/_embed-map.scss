.is-embed-action{
  width: 100%;
  height: 100%;
  min-height: 0 !important;
  overflow: hidden;


  // HEADER
  .embed-header{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    h1{
      width: 60px;
      height: 60px;
      position: absolute;
      top: 0;
      left: 20px;
      text-indent: -9999px;
      z-index: 31;
      margin: 0 0 0 15px;
      @include retina-image('logo-new.png','logo-new@2x.png');
      transition: all 0.25s linear;
      &.active{
        opacity: 0;
        visibility: hidden;
      }
      a{
        display: block;
        height: 100%;
        width: 100%;
      }
    }
  }

  // LAYOUT
  .layout-content{
    height: 100%;
    top: 0;
    position: inherit;
  }

  .timeline-mobile-call-to-action {
    display: none;
  }

  .widget-timeline .timeline-year.timeline-torque .timeline-slider {display: none;}
  @media (max-width: $br-mobileMap - 1) and (min-width: 480px){
    // MODULES
    .module{
      box-shadow: $shadow1;
      .title-dialog{
        display: block;
        position: relative;
        cursor: pointer;
        text-transform: uppercase;
        padding: 0px 0px 5px;
        margin: 20px 20px 15px;
        border-bottom: 1px solid #F69;
        text-align: left;
        &.active{
          span{
            display: none;
          }
          &:after{ transform: translate(0,-100%) rotate(180deg);}
        }
        &:after{
          display: block;
          content: "";
          position: absolute;
          top: 50%;
          right: 5px;
          width: 0;
          height: 0;
          transform: translate(0,-100%);
          border-left: 3px solid transparent;
          border-right: 3px solid transparent;
          border-top: 5px solid #F69;
        }
        span{
          display: inline-block;
          font-size: 12px;
          text-transform: lowercase;
        }
      }
      .button-box-embed-legend{
        padding: 0 20px 20px;
        &.active{
          display: block;
        }
      }
    }

    // Legend
    .module-legend{
      top: 20px;
      left: initial;
      right: 20px;
      bottom: auto;
      max-height: calc(100% - 90px);
      max-width: 300px;
      padding: 0;
      transform: translate(0,0);
      .close{
        display: none;
      }
      .categories {
        display: none;
        &.active{
          display: block;
        }
      }
    }

    .module-mapcontrols{
      display: none;
      bottom: 73px;
      left: 21px;
      top: auto;
      right: auto;
      &.active{
        display: block;
      }
      .toggle-buttons{
        display: none;
      }
    }


    // Analysis
    .module.module-mapcontrols-mobile{
      bottom: 50px;
      left: 50%;
      transform: translate(-160px,0);
      ul{
        display: none;
        margin: 0;
        &.embed-show{
          display: block;
        }
      }
    }

    .analysis-result {
      padding: 0;
      .close{
        display: none;
      }
      .analysis-stats{
        background: $white;
        font-size: 12px;
        max-width: 600px;
        margin: 0 auto;
        display: flex;
        justify-content: center;
        li{
          padding: 0 15px;
          margin: 15px 0;
          text-align: center;
          width: 33.33333333%;
          border-left: 1px solid $border;
          &:first-child{
            padding: 0 15px;
            border: none;
          }
          &:last-child{
            padding: 0 15px;
            border-left: 1px solid $border;
          }
        }
      }
      .analysis-footer{
        display: none;
      }
    }

    // Timeline
    .widget-timeline{
      .widget-box{
        bottom: 70px;
        left: 50%;
        width: 100%;
        height: 50px;
        transform: translate(-50%,0%);
        box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.25);
        .timeline-year .time .select-timeline-container,
        .timeline-month .time .select-timeline-container,
        .timeline-btn .time .select-timeline-container{
          line-height: 50px;
        }
      }
      .timeline-mobile-call-to-action {
        position: absolute;
        bottom: 0;
        height: 70px;
        background-color: $cGreen;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        span {
          font-size: 12px;
          color: $white;
          text-transform: uppercase;
          padding: 0 10px 0 0;
        }
        a {
          color: $cGreen;
        }
      }
      &.analysis{
        .widget-box{
          bottom: 73px;
        }
      }
    }

    .module-tabs{
      bottom: 20px;
      top: auto;
      left: 20px;
    }

    //analysis
    .module-tabs > header,
    .tab-analysis nav,
    .tab-analysis .analysis-content,
    //footer
    .footer-toggle,
    .map-logos,
    .map-container .gm-style:after,
    //map controls
    .tab-analysis-mobile,
    //croshairs
    .map-viewfinder,
    //feedback
    .feedback-link,
    .module-navmobile {
      display: none !important;
    }
  }
  @media (max-width: 479px){
    .embed-header{
      h1{
        right: auto;
        left: 10px;
        margin: 0;
      }
    }
    .widget-timeline{
      .widget-box{
        bottom: 89px;
      }
    }

    .module-navmobile {
      bottom: 0;
    }

    .module-mapcontrols{
      bottom: 114px;
    }
    .module-tabs .button-container.fixed{
      bottom: 0;
    }
  }

  //footer
  .footer-toggle,
  .map-logos,
  .map-container .gm-style:after,
  //croshairs
  .map-viewfinder,
  //feedback
  .feedback-link,
  .guideTourButton {
    display: none !important;
  }
}

.tooltip-info-legend {
  padding: 20px;
  background-color: red;
  position: absolute;
  z-index: 1000;
  max-width: 200px;
  min-width: 200px;
  width: 200px;
  padding: 8px;
  background-color: #fffee2;
  box-shadow: 0 1px 3px 0 rgba(85, 85, 85, .25);

  span,
  p {
    font-size: 12px;
    line-height: 1.42;
    letter-spacing: -.2px;
    color: #555;
  }

  p {
    opacity: .5;
  }
  .triangle {
    position: relative;

    &::after {
    	top: 100%;
    	left: 50%;
    	border: solid transparent;
    	content: '';
    	height: 0;
    	width: 0;
    	position: absolute;
    	pointer-events: none;
      border-color: rgba(136, 183, 213, 0);
      border-top-color: #fffee2;
    	border-width: 15px;
    	margin-left: -15px;
    }
  }
}
